@using CoffeeTunes.Contracts.BrewCycles

<div class="results-display">
    <h3 class="results-title">â˜• Brewing Results</h3>
    
    <div class="owners-section">
        <h4 class="section-title">ğŸµ Submitted by:</h4>
        <div class="owners-list">
            @foreach (var owner in Results.Owners)
            {
                <div class="owner-item">
                    <span class="owner-icon">ğŸ‘¤</span>
                    <span class="owner-name">@owner.Name</span>
                </div>
            }
        </div>
    </div>
    
    <div class="votes-section">
        <h4 class="section-title">ğŸ—³ï¸ Voting Results:</h4>
        <div class="votes-list">
            @foreach (var result in Results.Results.OrderByDescending(r => r.Beans.Count))
            {
                <div class="voter-result">
                    <div class="voter-header">
                        <span class="voter-icon">ğŸ‘¤</span>
                        <span class="voter-name">@result.Hipster.Name</span>
                        <span class="bean-count">@result.Beans.Count bean@(result.Beans.Count == 1 ? "" : "s")</span>
                    </div>
                    
                    @if (result.Beans.Any())
                    {
                        <div class="cast-beans">
                            @foreach (var bean in result.Beans)
                            {
                                <div class="bean-item @(bean.WasCorrect ? "correct" : "incorrect")">
                                    <span class="bean-icon">@(bean.WasCorrect ? "âœ“" : "âœ—")</span>
                                    <span class="bean-hipster">@bean.HipsterCastFor.Name</span>
                                </div>
                            }
                        </div>
                    }
                    else
                    {
                        <div class="no-beans">No beans cast</div>
                    }
                </div>
            }
        </div>
    </div>
</div>

@code {
    [Parameter]
    public required BrewCycleRevealContract Results { get; set; }
}
